<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_SUB08" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.0.0">
  <bpmn:collaboration id="Collaboration_SUB08">
    <bpmn:participant id="Participant_SUB08" name="SUB 08 - Recebimento e Conciliação Financeira" processRef="Process_SUB_08_Revenue_Collection" />
  </bpmn:collaboration>
  <bpmn:process id="Process_SUB_08_Revenue_Collection" name="Recebimento e Conciliação Financeira" isExecutable="true" camunda:historyTimeToLive="P365D">
    <bpmn:laneSet id="LaneSet_SUB08">
      <bpmn:lane id="Lane_Bank_Integration" name="Integração Bancária">
        <bpmn:flowNodeRef>Event_Start_Payment</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Process_CNAB</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Process_PIX</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_Reconciliation" name="Conciliação">
        <bpmn:flowNodeRef>Task_Auto_Matching</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_Match_Found</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Manual_Matching</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Allocate_Payment</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Analyze_Difference</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_Difference_Type</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Create_Provision</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Compensate_Allocation</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Compensate_Provision</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_AR_Management" name="Contas a Receber">
        <bpmn:flowNodeRef>Task_Aging_Analysis</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Collection_Workflow</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_Collection" name="Cobrança">
        <bpmn:flowNodeRef>Task_Negativation</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Legal_Referral</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_Write_Off</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_End_Collected</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>

    <bpmn:startEvent id="Event_Start_Payment" name="Ciclo de Conciliação">
      <bpmn:outgoing>Flow_Start_To_CNAB</bpmn:outgoing>
      <bpmn:timerEventDefinition>
        <bpmn:timeCycle>0 0 6 * * ?</bpmn:timeCycle>
      </bpmn:timerEventDefinition>
    </bpmn:startEvent>

    <bpmn:serviceTask id="Task_Process_CNAB" name="Processar CNAB" camunda:asyncBefore="true" camunda:jobPriority="7" camunda:type="external" camunda:topic="rpa-cnab-parser">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="cnabFiles">${cnabFiles}</camunda:inputParameter>
          <camunda:outputParameter name="cnabTransactions">${cnabTransactions}</camunda:outputParameter>
        </camunda:inputOutput>
        <camunda:formData>
          <camunda:formField id="collectionTimestamp" label="Data/Hora da Coleta" type="date" defaultValue="${now()}" />
          <camunda:formField id="cnabVersion" label="Versão CNAB" type="enum">
            <camunda:value id="CNAB240" name="CNAB240" />
            <camunda:value id="CNAB400" name="CNAB400" />
            <camunda:value id="CNAB750" name="CNAB750" />
          </camunda:formField>
          <camunda:formField id="paymentDate" label="Data do Pagamento" type="date" />
          <camunda:formField id="bankCode" label="Código do Banco" type="enum">
            <camunda:value id="001-BRASIL" name="001-BRASIL" />
            <camunda:value id="237-BRADESCO" name="237-BRADESCO" />
            <camunda:value id="341-ITAU" name="341-ITAU" />
            <camunda:value id="104-CAIXA" name="104-CAIXA" />
          </camunda:formField>
        </camunda:formData>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Start_To_CNAB</bpmn:incoming>
      <bpmn:outgoing>Flow_CNAB_To_PIX</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Process_PIX" name="Processar PIX" camunda:asyncBefore="true" camunda:delegateExpression="${processPixDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="pixWebhookData">${pixWebhookData}</camunda:inputParameter>
          <camunda:outputParameter name="pixTransactions">${pixTransactions}</camunda:outputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_CNAB_To_PIX</bpmn:incoming>
      <bpmn:outgoing>Flow_PIX_To_Matching</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Auto_Matching" name="Matching Automático" camunda:asyncBefore="true" camunda:delegateExpression="${autoMatchingDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="transactions">${cnabTransactions}${pixTransactions}</camunda:inputParameter>
          <camunda:inputParameter name="pendingInvoices">${pendingInvoices}</camunda:inputParameter>
          <camunda:outputParameter name="matchResults">${matchResults}</camunda:outputParameter>
          <camunda:outputParameter name="matchFound">${matchFound}</camunda:outputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_PIX_To_Matching</bpmn:incoming>
      <bpmn:outgoing>Flow_Matching_To_Gateway</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:exclusiveGateway id="Gateway_Match_Found" name="Match Encontrado?">
      <bpmn:incoming>Flow_Matching_To_Gateway</bpmn:incoming>
      <bpmn:outgoing>Flow_Match_Yes</bpmn:outgoing>
      <bpmn:outgoing>Flow_Match_No</bpmn:outgoing>
    </bpmn:exclusiveGateway>

    <bpmn:userTask id="Task_Manual_Matching" name="Matching Manual" camunda:assignee="${financeiro}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="unmatchedTransactions" label="Transações Não Conciliadas" type="string" />
          <camunda:formField id="selectedInvoice" label="Fatura Selecionada" type="string" />
          <camunda:formField id="observations" label="Observações" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Match_No</bpmn:incoming>
      <bpmn:outgoing>Flow_Manual_To_Allocate</bpmn:outgoing>
    </bpmn:userTask>

    <bpmn:serviceTask id="Task_Allocate_Payment" name="Alocar Pagamento" camunda:asyncBefore="true" camunda:delegateExpression="${allocatePaymentDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="matchResults">${matchResults}</camunda:inputParameter>
          <camunda:outputParameter name="allocationResult">${allocationResult}</camunda:outputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Match_Yes</bpmn:incoming>
      <bpmn:incoming>Flow_Manual_To_Allocate</bpmn:incoming>
      <bpmn:outgoing>Flow_Allocate_To_Analyze</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Analyze_Difference" name="Analisar Diferença" camunda:asyncBefore="true" camunda:delegateExpression="${analyzeDifferenceDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="allocationResult">${allocationResult}</camunda:inputParameter>
          <camunda:outputParameter name="differenceType">${differenceType}</camunda:outputParameter>
          <camunda:outputParameter name="differenceAmount">${differenceAmount}</camunda:outputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Allocate_To_Analyze</bpmn:incoming>
      <bpmn:outgoing>Flow_Analyze_To_Gateway</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:exclusiveGateway id="Gateway_Difference_Type" name="Tipo de Diferença">
      <bpmn:incoming>Flow_Analyze_To_Gateway</bpmn:incoming>
      <bpmn:outgoing>Flow_Diff_Glosa</bpmn:outgoing>
      <bpmn:outgoing>Flow_Diff_Partial</bpmn:outgoing>
      <bpmn:outgoing>Flow_Diff_None</bpmn:outgoing>
    </bpmn:exclusiveGateway>

    <bpmn:serviceTask id="Task_Create_Provision" name="Criar Provisão" camunda:asyncBefore="true" camunda:delegateExpression="${createProvisionDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="differenceAmount">${differenceAmount}</camunda:inputParameter>
          <camunda:inputParameter name="differenceType">${differenceType}</camunda:inputParameter>
        </camunda:inputOutput>

        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Diff_Glosa</bpmn:incoming>
      <bpmn:incoming>Flow_Diff_Partial</bpmn:incoming>
      <bpmn:outgoing>Flow_Provision_To_Aging</bpmn:outgoing>
    </bpmn:serviceTask>

    <!-- Compensation Boundary Events -->
    <bpmn:boundaryEvent id="Boundary_Compensate_Allocation" attachedToRef="Task_Allocate_Payment">
      <bpmn:compensateEventDefinition />
    </bpmn:boundaryEvent>

    <bpmn:boundaryEvent id="Boundary_Compensate_Provision" attachedToRef="Task_Create_Provision">
      <bpmn:compensateEventDefinition />
    </bpmn:boundaryEvent>

    <!-- Compensation Tasks -->
    <bpmn:serviceTask id="Task_Compensate_Allocation" name="Reverter Alocação" isForCompensation="true" camunda:delegateExpression="${compensateAllocationDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="allocationResult">${allocationResult}</camunda:inputParameter>
          <camunda:inputParameter name="transactionId">${transactionId}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Compensate_Provision" name="Reverter Provisão" isForCompensation="true" camunda:delegateExpression="${compensateProvisionDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="differenceAmount">${differenceAmount}</camunda:inputParameter>
          <camunda:inputParameter name="differenceType">${differenceType}</camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Aging_Analysis" name="Análise de Aging" camunda:asyncBefore="true" camunda:delegateExpression="${agingAnalysisDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="accountsReceivable">${accountsReceivable}</camunda:inputParameter>
          <camunda:outputParameter name="agingReport">${agingReport}</camunda:outputParameter>
          <camunda:outputParameter name="overdueAccounts">${overdueAccounts}</camunda:outputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Provision_To_Aging</bpmn:incoming>
      <bpmn:incoming>Flow_Diff_None</bpmn:incoming>
      <bpmn:outgoing>Flow_Aging_To_Collection</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Collection_Workflow" name="Régua de Cobrança" camunda:asyncBefore="true" camunda:type="external" camunda:topic="rpa-collection">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="overdueAccounts">${overdueAccounts}</camunda:inputParameter>
          <camunda:inputParameter name="collectionStrategy">multichannel</camunda:inputParameter>
          <camunda:outputParameter name="collectionResults">${collectionResults}</camunda:outputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Aging_To_Collection</bpmn:incoming>
      <bpmn:outgoing>Flow_Collection_To_Negativation</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Negativation" name="Negativar SPC/Serasa" camunda:asyncBefore="true" camunda:delegateExpression="${negativationDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="overdueAccounts">${overdueAccounts}</camunda:inputParameter>
          <camunda:inputParameter name="minimumDaysOverdue">90</camunda:inputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Collection_To_Negativation</bpmn:incoming>
      <bpmn:outgoing>Flow_Negativation_To_Legal</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Legal_Referral" name="Encaminhar Jurídico" camunda:asyncBefore="true" camunda:delegateExpression="${legalReferralDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="overdueAccounts">${overdueAccounts}</camunda:inputParameter>
          <camunda:inputParameter name="minimumDaysOverdue">180</camunda:inputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Negativation_To_Legal</bpmn:incoming>
      <bpmn:outgoing>Flow_Legal_To_WriteOff</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:serviceTask id="Task_Write_Off" name="Provisão para Perda" camunda:asyncBefore="true" camunda:delegateExpression="${writeOffDelegate}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="uncollectibleAccounts">${uncollectibleAccounts}</camunda:inputParameter>
          <camunda:inputParameter name="minimumDaysOverdue">360</camunda:inputParameter>
        </camunda:inputOutput>
      
        <camunda:executionListener event="start" class="com.hospital.audit.TaskStartListener" />
        <camunda:executionListener event="end" class="com.hospital.audit.TaskEndListener" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_Legal_To_WriteOff</bpmn:incoming>
      <bpmn:outgoing>Flow_WriteOff_To_End</bpmn:outgoing>
    </bpmn:serviceTask>

    <bpmn:endEvent id="Event_End_Collected" name="Recebimento Concluído">
      <bpmn:incoming>Flow_WriteOff_To_End</bpmn:incoming>
    </bpmn:endEvent>

    <!-- Sequence Flows -->
    <bpmn:sequenceFlow id="Flow_Start_To_CNAB" sourceRef="Event_Start_Payment" targetRef="Task_Process_CNAB" />
    <bpmn:sequenceFlow id="Flow_CNAB_To_PIX" sourceRef="Task_Process_CNAB" targetRef="Task_Process_PIX" />
    <bpmn:sequenceFlow id="Flow_PIX_To_Matching" sourceRef="Task_Process_PIX" targetRef="Task_Auto_Matching" />
    <bpmn:sequenceFlow id="Flow_Matching_To_Gateway" sourceRef="Task_Auto_Matching" targetRef="Gateway_Match_Found" />
    <bpmn:sequenceFlow id="Flow_Match_Yes" name="Sim" sourceRef="Gateway_Match_Found" targetRef="Task_Allocate_Payment">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${matchFound == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_Match_No" name="Não" sourceRef="Gateway_Match_Found" targetRef="Task_Manual_Matching">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${matchFound == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_Manual_To_Allocate" sourceRef="Task_Manual_Matching" targetRef="Task_Allocate_Payment" />
    <bpmn:sequenceFlow id="Flow_Allocate_To_Analyze" sourceRef="Task_Allocate_Payment" targetRef="Task_Analyze_Difference" />
    <bpmn:sequenceFlow id="Flow_Analyze_To_Gateway" sourceRef="Task_Analyze_Difference" targetRef="Gateway_Difference_Type" />
    <bpmn:sequenceFlow id="Flow_Diff_Glosa" name="Glosa" sourceRef="Gateway_Difference_Type" targetRef="Task_Create_Provision">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${differenceType == 'glosa'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_Diff_Partial" name="Parcial" sourceRef="Gateway_Difference_Type" targetRef="Task_Create_Provision">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${differenceType == 'partial'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_Diff_None" name="Integral" sourceRef="Gateway_Difference_Type" targetRef="Task_Aging_Analysis">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${differenceType == 'none'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_Provision_To_Aging" sourceRef="Task_Create_Provision" targetRef="Task_Aging_Analysis" />
    <bpmn:sequenceFlow id="Flow_Aging_To_Collection" sourceRef="Task_Aging_Analysis" targetRef="Task_Collection_Workflow" />
    <bpmn:sequenceFlow id="Flow_Collection_To_Negativation" sourceRef="Task_Collection_Workflow" targetRef="Task_Negativation" />
    <bpmn:sequenceFlow id="Flow_Negativation_To_Legal" sourceRef="Task_Negativation" targetRef="Task_Legal_Referral" />
    <bpmn:sequenceFlow id="Flow_Legal_To_WriteOff" sourceRef="Task_Legal_Referral" targetRef="Task_Write_Off" />
    <bpmn:sequenceFlow id="Flow_WriteOff_To_End" sourceRef="Task_Write_Off" targetRef="Event_End_Collected" />

    <!-- Compensation Associations -->
    <bpmn:association id="Assoc_Compensate_Allocation" associationDirection="One" sourceRef="Boundary_Compensate_Allocation" targetRef="Task_Compensate_Allocation" />
    <bpmn:association id="Assoc_Compensate_Provision" associationDirection="One" sourceRef="Boundary_Compensate_Provision" targetRef="Task_Compensate_Provision" />
  </bpmn:process>

  <bpmndi:BPMNDiagram id="BPMNDiagram_SUB08">
    <bpmndi:BPMNPlane id="BPMNPlane_SUB08" bpmnElement="Collaboration_SUB08">
      <bpmndi:BPMNShape id="Participant_SUB08_di" bpmnElement="Participant_SUB08" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="2600" height="720" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_Bank_Integration_di" bpmnElement="Lane_Bank_Integration" isHorizontal="true">
        <dc:Bounds x="190" y="80" width="2570" height="150" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_Reconciliation_di" bpmnElement="Lane_Reconciliation" isHorizontal="true">
        <dc:Bounds x="190" y="230" width="2570" height="250" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_AR_Management_di" bpmnElement="Lane_AR_Management" isHorizontal="true">
        <dc:Bounds x="190" y="480" width="2570" height="150" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_Collection_di" bpmnElement="Lane_Collection" isHorizontal="true">
        <dc:Bounds x="190" y="630" width="2570" height="170" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_Start_Payment_di" bpmnElement="Event_Start_Payment">
        <dc:Bounds x="252" y="132" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="241" y="175" width="58" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Process_CNAB_di" bpmnElement="Task_Process_CNAB">
        <dc:Bounds x="340" y="110" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Process_PIX_di" bpmnElement="Task_Process_PIX">
        <dc:Bounds x="490" y="110" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Auto_Matching_di" bpmnElement="Task_Auto_Matching">
        <dc:Bounds x="640" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Match_Found_di" bpmnElement="Gateway_Match_Found" isMarkerVisible="true">
        <dc:Bounds x="795" y="275" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="787" y="245" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Manual_Matching_di" bpmnElement="Task_Manual_Matching">
        <dc:Bounds x="770" y="380" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Allocate_Payment_di" bpmnElement="Task_Allocate_Payment">
        <dc:Bounds x="920" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Analyze_Difference_di" bpmnElement="Task_Analyze_Difference">
        <dc:Bounds x="1070" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_Difference_Type_di" bpmnElement="Gateway_Difference_Type" isMarkerVisible="true">
        <dc:Bounds x="1225" y="275" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1217" y="245" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Create_Provision_di" bpmnElement="Task_Create_Provision">
        <dc:Bounds x="1330" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Aging_Analysis_di" bpmnElement="Task_Aging_Analysis">
        <dc:Bounds x="1500" y="510" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Collection_Workflow_di" bpmnElement="Task_Collection_Workflow">
        <dc:Bounds x="1650" y="510" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Negativation_di" bpmnElement="Task_Negativation">
        <dc:Bounds x="1800" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Legal_Referral_di" bpmnElement="Task_Legal_Referral">
        <dc:Bounds x="1950" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Write_Off_di" bpmnElement="Task_Write_Off">
        <dc:Bounds x="2100" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_End_Collected_di" bpmnElement="Event_End_Collected">
        <dc:Bounds x="2262" y="682" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2247" y="725" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Boundary_Compensate_Allocation_di" bpmnElement="Boundary_Compensate_Allocation">
        <dc:Bounds x="1002" y="322" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Boundary_Compensate_Provision_di" bpmnElement="Boundary_Compensate_Provision">
        <dc:Bounds x="1412" y="322" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Compensate_Allocation_di" bpmnElement="Task_Compensate_Allocation">
        <dc:Bounds x="920" y="380" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_Compensate_Provision_di" bpmnElement="Task_Compensate_Provision">
        <dc:Bounds x="1330" y="380" width="100" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_Start_To_CNAB_di" bpmnElement="Flow_Start_To_CNAB">
        <di:waypoint x="288" y="150" />
        <di:waypoint x="340" y="150" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_CNAB_To_PIX_di" bpmnElement="Flow_CNAB_To_PIX">
        <di:waypoint x="440" y="150" />
        <di:waypoint x="490" y="150" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_PIX_To_Matching_di" bpmnElement="Flow_PIX_To_Matching">
        <di:waypoint x="590" y="150" />
        <di:waypoint x="615" y="150" />
        <di:waypoint x="615" y="300" />
        <di:waypoint x="640" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Matching_To_Gateway_di" bpmnElement="Flow_Matching_To_Gateway">
        <di:waypoint x="740" y="300" />
        <di:waypoint x="795" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Match_Yes_di" bpmnElement="Flow_Match_Yes">
        <di:waypoint x="845" y="300" />
        <di:waypoint x="920" y="300" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="874" y="282" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Match_No_di" bpmnElement="Flow_Match_No">
        <di:waypoint x="820" y="325" />
        <di:waypoint x="820" y="380" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="826" y="350" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Manual_To_Allocate_di" bpmnElement="Flow_Manual_To_Allocate">
        <di:waypoint x="870" y="420" />
        <di:waypoint x="895" y="420" />
        <di:waypoint x="895" y="300" />
        <di:waypoint x="920" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Allocate_To_Analyze_di" bpmnElement="Flow_Allocate_To_Analyze">
        <di:waypoint x="1020" y="300" />
        <di:waypoint x="1070" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Analyze_To_Gateway_di" bpmnElement="Flow_Analyze_To_Gateway">
        <di:waypoint x="1170" y="300" />
        <di:waypoint x="1225" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Diff_Glosa_di" bpmnElement="Flow_Diff_Glosa">
        <di:waypoint x="1275" y="300" />
        <di:waypoint x="1330" y="300" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1288" y="282" width="30" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Diff_Partial_di" bpmnElement="Flow_Diff_Partial">
        <di:waypoint x="1250" y="325" />
        <di:waypoint x="1250" y="360" />
        <di:waypoint x="1380" y="360" />
        <di:waypoint x="1380" y="340" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1304" y="342" width="33" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Diff_None_di" bpmnElement="Flow_Diff_None">
        <di:waypoint x="1250" y="325" />
        <di:waypoint x="1250" y="550" />
        <di:waypoint x="1500" y="550" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1256" y="435" width="35" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Provision_To_Aging_di" bpmnElement="Flow_Provision_To_Aging">
        <di:waypoint x="1430" y="300" />
        <di:waypoint x="1465" y="300" />
        <di:waypoint x="1465" y="550" />
        <di:waypoint x="1500" y="550" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Aging_To_Collection_di" bpmnElement="Flow_Aging_To_Collection">
        <di:waypoint x="1600" y="550" />
        <di:waypoint x="1650" y="550" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Collection_To_Negativation_di" bpmnElement="Flow_Collection_To_Negativation">
        <di:waypoint x="1750" y="550" />
        <di:waypoint x="1775" y="550" />
        <di:waypoint x="1775" y="700" />
        <di:waypoint x="1800" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Negativation_To_Legal_di" bpmnElement="Flow_Negativation_To_Legal">
        <di:waypoint x="1900" y="700" />
        <di:waypoint x="1950" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_Legal_To_WriteOff_di" bpmnElement="Flow_Legal_To_WriteOff">
        <di:waypoint x="2050" y="700" />
        <di:waypoint x="2100" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_WriteOff_To_End_di" bpmnElement="Flow_WriteOff_To_End">
        <di:waypoint x="2200" y="700" />
        <di:waypoint x="2262" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Assoc_Compensate_Allocation_di" bpmnElement="Assoc_Compensate_Allocation">
        <di:waypoint x="1020" y="322" />
        <di:waypoint x="970" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Assoc_Compensate_Provision_di" bpmnElement="Assoc_Compensate_Provision">
        <di:waypoint x="1430" y="322" />
        <di:waypoint x="1380" y="380" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
